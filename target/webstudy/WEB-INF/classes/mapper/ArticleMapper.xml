<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.study.dao.ArticleMapper">
  <resultMap id="BaseResultMap" type="edu.study.model.Article">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jan 17 14:50:36 CST 2020.
    -->
    <id column="ARTICLE_ID" jdbcType="INTEGER" property="articleId" />
    <result column="USERNAME" jdbcType="VARCHAR" property="username" />
    <result column="CATEGORY_ID" jdbcType="INTEGER" property="categoryId" />
    <result column="NAME" jdbcType="VARCHAR" property="name" />
    <result column="CREATE_TIME" jdbcType="TIMESTAMP" property="createTime" />
    <result column="MODIFY_TIME" jdbcType="TIMESTAMP" property="modifyTime" />
    <result column="LABEL" jdbcType="VARCHAR" property="label" />
    <result column="CLICKS" jdbcType="INTEGER" property="clicks" />
    <result column="AGREES" jdbcType="INTEGER" property="agrees" />
    <result column="CONTENT" jdbcType="LONGVARCHAR" property="content" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jan 17 14:50:36 CST 2020.
    -->
    delete from article
    where ARTICLE_ID = #{articleId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="edu.study.model.Article">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jan 17 14:50:36 CST 2020.
    -->
    insert into article (ARTICLE_ID, USERNAME, CATEGORY_ID, 
      NAME, CREATE_TIME, MODIFY_TIME, 
      LABEL, CLICKS, AGREES, 
      CONTENT)
    values (#{articleId,jdbcType=INTEGER}, #{username,jdbcType=VARCHAR}, #{categoryId,jdbcType=INTEGER}, 
      #{name,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP}, #{modifyTime,jdbcType=TIMESTAMP}, 
      #{label,jdbcType=VARCHAR}, #{clicks,jdbcType=INTEGER}, #{agrees,jdbcType=INTEGER}, 
      #{content,jdbcType=LONGVARCHAR})
  </insert>
  <update id="updateByPrimaryKey" parameterType="edu.study.model.Article">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jan 17 14:50:36 CST 2020.
    -->
    update article
    set USERNAME = #{username,jdbcType=VARCHAR},
      CATEGORY_ID = #{categoryId,jdbcType=INTEGER},
      NAME = #{name,jdbcType=VARCHAR},
      CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
      MODIFY_TIME = #{modifyTime,jdbcType=TIMESTAMP},
      LABEL = #{label,jdbcType=VARCHAR},
      CLICKS = #{clicks,jdbcType=INTEGER},
      AGREES = #{agrees,jdbcType=INTEGER},
      CONTENT = #{content,jdbcType=LONGVARCHAR}
    where ARTICLE_ID = #{articleId,jdbcType=INTEGER}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jan 17 14:50:36 CST 2020.
    -->
    select ARTICLE_ID, USERNAME, CATEGORY_ID, NAME, CREATE_TIME, MODIFY_TIME, LABEL, 
    CLICKS, AGREES, CONTENT
    from article
    where ARTICLE_ID = #{articleId,jdbcType=INTEGER}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jan 17 14:50:36 CST 2020.
    -->
    select ARTICLE_ID, USERNAME, CATEGORY_ID, NAME, CREATE_TIME, MODIFY_TIME, LABEL, 
    CLICKS, AGREES, CONTENT
    from article
  </select>

  <insert id="insertAndGetId" parameterType="edu.study.model.Article"  useGeneratedKeys="true" keyProperty="articleId">

    insert into article (USERNAME, CATEGORY_ID,
    NAME, CREATE_TIME, MODIFY_TIME,
    LABEL, CLICKS, AGREES,
    CONTENT)
    values (#{username,jdbcType=VARCHAR}, #{categoryId,jdbcType=INTEGER},
    #{name,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP}, #{modifyTime,jdbcType=TIMESTAMP},
    #{label,jdbcType=VARCHAR}, #{clicks,jdbcType=INTEGER}, #{agrees,jdbcType=INTEGER},
    #{content,jdbcType=LONGVARCHAR})
  </insert>

  <select id="articleCountByCategoryId" parameterType="java.lang.Integer" resultType="java.lang.Integer">
    select count(*) from article where CATEGORY_ID = #{categoryId,jdbcType=INTEGER}
  </select>

  <select id="selectByPageLimit" parameterType="Map" resultMap="BaseResultMap">
    select ARTICLE_ID, USERNAME, CATEGORY_ID, NAME, CREATE_TIME, MODIFY_TIME, LABEL,
    CLICKS, AGREES, CONTENT
    from article
    where CATEGORY_ID = #{categoryId,jdbcType=INTEGER}
    limit #{start,jdbcType=INTEGER},#{size,jdbcType=INTEGER}
  </select>

  <update id="updateArticleClicks" parameterType="java.lang.Integer">
    update article set CLICKS = CLICKS + 1 where ARTICLE_ID = #{articleId,jdbcType=INTEGER}
  </update>

  <update id="updateArticleAgrees" parameterType="java.lang.Integer">
    update article set AGREES = AGREES + 1 where ARTICLE_ID = #{articleId,jdbcType=INTEGER}
  </update>

</mapper>